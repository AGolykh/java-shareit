DROP TABLE IF EXISTS PUBLIC.REQUESTS CASCADE;
DROP TABLE IF EXISTS PUBLIC.BOOKING CASCADE;
DROP TABLE IF EXISTS PUBLIC.ITEMS CASCADE;
DROP TABLE IF EXISTS PUBLIC.USERS CASCADE;

CREATE TABLE IF NOT EXISTS PUBLIC.USERS
(
    USER_ID   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    USER_NAME VARCHAR(100) UNIQUE,
    EMAIL     VARCHAR(100) UNIQUE
);

CREATE TABLE IF NOT EXISTS PUBLIC.ITEMS
(
    ITEM_ID     BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    ITEM_NAME   VARCHAR(100)                                        NOT NULL,
    DESCRIPTION VARCHAR(100)                                        NOT NULL,
    AVAILABLE   BOOLEAN                                             NOT NULL
);

CREATE TABLE IF NOT EXISTS PUBLIC.BOOKING
(
    BOOKING_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    START_TIME TIMESTAMP                                           NOT NULL,
    END_TIME   TIMESTAMP                                           NOT NULL,
    ITEM_ID    BIGINT                                              NOT NULL,
    BOOKER_ID  BIGINT                                              NOT NULL,
    STATUS_ID  INTEGER                                             NOT NULL,
    CONSTRAINT FK_BOOKING_ITEMS_ID FOREIGN KEY (ITEM_ID) REFERENCES PUBLIC.ITEMS (ITEM_ID),
    CONSTRAINT FK_BOOKING_USERS_ID FOREIGN KEY (BOOKER_ID) REFERENCES PUBLIC.USERS (USER_ID)
);

CREATE TABLE IF NOT EXISTS PUBLIC.REQUESTS
(
    REQUEST_ID   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    GENRE_NAME   VARCHAR(100)                                        NOT NULL,
    REQUESTOR_ID BIGINT                                              NOT NULL,
    CREATED      TIMESTAMP                                           NOT NULL,
    CONSTRAINT FK_REQUESTS_USERS_ID FOREIGN KEY (REQUESTOR_ID) REFERENCES PUBLIC.USERS (USER_ID)
);
